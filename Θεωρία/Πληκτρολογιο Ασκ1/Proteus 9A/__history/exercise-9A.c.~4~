#include<main-proteus.h>
#include<keypad-proteus-tr.h>
#include<flex_lcd-proteus.h>
#byte PORTB=0xf81
#byte PORTD=0xf83

//Ορισμοί συναρτήσεων
void init(void);

//Κύριο πρόγραμμα
void main()
{
char k;      //μεταβλητή k για αποθήκευση του ASCII κώδικα του πλήκτρου που πατήθηκε
init();      //ρουτίνα αρχικοποίησης
kbd_init();   //εκτέλεση της ρουτίνας αρχικών ρυθμίσεων του μικροελεγκτή

while(TRUE)
{
k=kbd_getc(); //Ανάγνωση του πληκτρολογίου. Μεταφέρεται στην μεταβλητή k
              //o ASCII κώδικας του πλήκτρου που πατήθηκε.
              //Αν δεν πατηθεί κανένα πλήκτρο η μεταβλητή k παίρνει την τιμή 0
If(k!=0)              // Αν πατηθεί κάποιο πλήκτρο, δηλαδή αν k?0 εκτελούνται όσα είναι
{              //μέσα στις αγκύλες
PORTD=k;       //Μεταφέρεται στην πόρτα D ο ASCII κώδικας του πλήκτρου που πατήθηκε,
}             //δηλαδή η μεταβλητή k στην πόρτα D
}
}

//κώδικας συναρτήσεων
void init (void)
{
set_tris_d(0x00);    //Η πόρτα D γίνεται έξοδος
PORTD=0x00;         //Αρχική τιμή στην πόρτα D ίση με 0x00
}

